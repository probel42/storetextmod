# storetextmod
Тестовое задание представляющее модификацию к Minecraft.

# Описание
Я не совсем понял как эта штука (Minecraft Fabric) совмещается с DI-фреймворками, надо разбираться. Поэтому сделал самый быстрый и простой для себя вариант: отдельный сервис для хранения сообщений. Т.е. схема такая:

Клиент Minecraft -> Сервер Minecraft -> Сервис хранения сообщений -> Postgres

В самом Fabric представлены механизмы для реализации взаимодействия клиента Minecraft с сервером Minecraft. Взаимодействие сервера Minecraft с сервисом хранения сообщений реализовано через grpc.
Для удобства запуска сервис хранения и саму СУБД завернул в докер вместе с механизмом его сборки.
Для запуска нужен docker и docker-compose.

У контейнера с сервисом хранения наружу выставлен порт 9090 (для сервера Minecraft).
У контейнера с postgres наружу выставлен порт 5433 (для проверки, что сообщения записываются).
Оба порта можно поправить в .env (STORE_MESSAGE_SERVICE_PORT и POSTGRES_EXTERNAL_PORT).

# Запуск
docker-compose -p ibelan-iot up -d --remove-orphans
cd storetextmod
gradle runClient

Далее после создания игры в самой игре нужно ввести команду /store-message

# Остановка сервиса хранения сообщений
docker-compose -p ibelan_iot down

# Зачистка
Докер оставит после себя 2 volume'а: для собранного сервиса и для постгрес, а также 3 image'а. У них будет префикс ibelan_iot.

# Доработки
Тут, конечно, есть что дорабатывать. Например, по хорошему, нужно обрабатывать все ошибки, и прокидывать их до клиента Minecraft. Но, откровенно говоря, с текущей работой у меня совсем нет на это времени.
А вообще штука, конечно, интересная.